name: Zustand Stores
description: Global state management stores
version: "1.0"

stores:
  - name: useConfigStore
    state:
      - config: TriBridConfig | null
      - loading: boolean
      - error: string | null
      - dirty: boolean
    actions:
      - fetchConfig: () => Promise<void>
      - updateConfig: (config: Partial<TriBridConfig>) => Promise<void>
      - updateSection: <K>(section: K, updates: Partial<TriBridConfig[K]>) => Promise<void>
      - resetConfig: () => Promise<void>
      - setDirty: (dirty: boolean) => void

  - name: useHealthStore
    state:
      - healthy: boolean
      - services: Record<string, ServiceStatus>
      - docker: Record<string, ContainerStatus>
      - lastCheck: Date | null
      - checking: boolean
    actions:
      - checkHealth: () => Promise<void>
      - checkDocker: () => Promise<void>
      - restartContainer: (name: string) => Promise<void>

  - name: useRepoStore
    state:
      - repos: Repository[]
      - activeRepoId: string | null
      - loading: boolean
      - error: string | null
    actions:
      - fetchRepos: () => Promise<void>
      - addRepo: (repo: {...}) => Promise<void>
      - deleteRepo: (repoId: string) => Promise<void>
      - setActiveRepo: (repoId: string) => void
      - getActiveRepo: () => Repository | null

  - name: useUIStore
    state:
      - activeTab: string
      - activeSubtabs: Record<string, string>
      - sidebarOpen: boolean
      - theme: 'light' | 'dark' | 'system'
      - evalInProgress: boolean
      - evalRunId: string | null
    actions:
      - setActiveTab: (tab: string) => void
      - setActiveSubtab: (tab: string, subtab: string) => void
      - toggleSidebar: () => void
      - setTheme: (theme: 'light' | 'dark' | 'system') => void
      - setEvalInProgress: (inProgress: boolean, runId?: string) => void

  - name: useGraphStore
    state:
      - entities: Entity[]
      - relationships: Relationship[]
      - communities: Community[]
      - selectedEntityId: string | null
      - stats: GraphStats | null
      - loading: boolean
      - error: string | null
    actions:
      - fetchEntities: (repoId: string, type?: string) => Promise<void>
      - fetchRelationships: (entityId: string) => Promise<void>
      - fetchCommunities: (repoId: string, level?: number) => Promise<void>
      - fetchStats: (repoId: string) => Promise<void>
      - selectEntity: (entityId: string | null) => void
      - executeQuery: (cypher: string) => Promise<any[]>

  - name: useTooltipStore
    state:
      - tooltips: Record<string, TooltipEntry>
      - glossary: TooltipEntry[]
      - searchQuery: string
      - filteredGlossary: TooltipEntry[]
    actions:
      - registerTooltip: (entry: TooltipEntry) => void
      - setSearchQuery: (query: string) => void
      - getTooltip: (id: string) => TooltipEntry | null
