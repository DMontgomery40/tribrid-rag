name: API Client
description: Frontend API client layer
version: "1.0"

modules:
  - name: client.ts
    description: Base HTTP client
    exports:
      - apiClient: Configured fetch/axios instance
      - BASE_URL: API base URL

  - name: chat.ts
    description: Chat API functions
    functions:
      - sendMessage: (request: ChatRequest) => Promise<ChatResponse>
      - streamMessage: (request: ChatRequest, onChunk: (text: string) => void) => Promise<void>
      - getHistory: (conversationId: string) => Promise<Message[]>
      - clearHistory: (conversationId: string) => Promise<void>

  - name: config.ts
    description: Config API functions
    functions:
      - getConfig: () => Promise<TriBridConfig>
      - updateConfig: (config: TriBridConfig) => Promise<TriBridConfig>
      - patchConfig: (section: string, updates: object) => Promise<TriBridConfig>
      - resetConfig: () => Promise<TriBridConfig>

  - name: docker.ts
    description: Docker API functions
    functions:
      - getStatus: () => Promise<Record<string, ContainerStatus>>
      - restartContainer: (name: string) => Promise<void>
      - getLogs: (name: string, lines?: number) => Promise<string[]>

  - name: eval.ts
    description: Evaluation API functions
    functions:
      - runEval: (request: EvalRequest) => Promise<EvalRun>
      - listRuns: (repoId?: string) => Promise<EvalRun[]>
      - getRun: (runId: string) => Promise<EvalRun>
      - deleteRun: (runId: string) => Promise<void>

  - name: graph.ts
    description: Graph API functions
    functions:
      - listEntities: (repoId: string, type?: string) => Promise<Entity[]>
      - getEntity: (repoId: string, entityId: string) => Promise<Entity>
      - getRelationships: (repoId: string, entityId: string) => Promise<Relationship[]>
      - listCommunities: (repoId: string, level?: number) => Promise<Community[]>
      - getStats: (repoId: string) => Promise<GraphStats>
      - executeQuery: (repoId: string, cypher: string) => Promise<any[]>

  - name: health.ts
    description: Health API functions
    functions:
      - checkHealth: () => Promise<HealthStatus>
      - checkReady: () => Promise<boolean>

  - name: search.ts
    description: Search API functions
    functions:
      - search: (request: SearchRequest) => Promise<SearchResponse>
      - answer: (request: AnswerRequest) => Promise<AnswerResponse>
      - streamAnswer: (request: AnswerRequest, onChunk: (text: string) => void) => Promise<void>
