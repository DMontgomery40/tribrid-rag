name: Search API
description: Search and answer endpoints
version: "1.0"

endpoints:
  - path: /search
    method: POST
    request: SearchRequest
    response: SearchResponse
    description: Tri-brid search

  - path: /answer
    method: POST
    request: AnswerRequest
    response: AnswerResponse
    description: RAG-powered answer

  - path: /answer/stream
    method: POST
    request: AnswerRequest
    response: StreamingResponse
    description: Stream RAG answer

models:
  SearchRequest:
    query: str
    repo_id: str
    top_k: int = 20
    include_vector: bool = True
    include_sparse: bool = True
    include_graph: bool = True

  SearchResponse:
    query: str
    matches: list[ChunkMatch]
    fusion_method: str
    reranker_mode: str
    latency_ms: float
    debug: dict | None

  ChunkMatch:
    chunk_id: str
    content: str
    file_path: str
    start_line: int
    end_line: int
    language: str | None
    score: float
    source: str
    metadata: dict
