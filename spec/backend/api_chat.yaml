name: Chat API
description: Chat endpoints for conversational RAG
version: "1.0"

endpoints:
  - path: /chat
    method: POST
    request: ChatRequest
    response: ChatResponse
    description: Send a message and get a RAG-powered response

  - path: /chat/stream
    method: POST
    request: ChatRequest
    response: StreamingResponse
    description: Stream a chat response

  - path: /chat/history/{conversation_id}
    method: GET
    response: list[Message]
    description: Get conversation history

  - path: /chat/history/{conversation_id}
    method: DELETE
    response: dict
    description: Clear conversation history

models:
  ChatRequest:
    message: str
    repo_id: str
    conversation_id: str | None
    stream: bool = False

  ChatResponse:
    conversation_id: str
    message: Message
    sources: list[ChunkMatch]
    tokens_used: int

  Message:
    role: Literal["user", "assistant", "system"]
    content: str
    timestamp: datetime
