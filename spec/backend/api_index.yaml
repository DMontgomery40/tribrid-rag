name: Index API
description: Indexing endpoints
version: "1.0"

endpoints:
  - path: /index
    method: POST
    request: IndexRequest
    response: IndexStatus
    description: Start indexing a repository

  - path: /index/{repo_id}/status
    method: GET
    response: IndexStatus
    description: Get indexing status

  - path: /index/{repo_id}/stats
    method: GET
    response: IndexStats
    description: Get index statistics

  - path: /index/{repo_id}
    method: DELETE
    response: dict
    description: Delete index

models:
  IndexRequest:
    repo_id: str
    repo_path: str
    force_reindex: bool = False

  IndexStatus:
    repo_id: str
    status: Literal["idle", "indexing", "complete", "error"]
    progress: float
    current_file: str | None
    error: str | None
    started_at: datetime | None
    completed_at: datetime | None

  IndexStats:
    repo_id: str
    total_files: int
    total_chunks: int
    total_tokens: int
    embedding_model: str
    embedding_dimensions: int
    last_indexed: datetime | None
    file_breakdown: dict[str, int]
