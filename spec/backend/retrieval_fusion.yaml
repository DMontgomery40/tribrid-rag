name: TriBridFusion
description: Tri-brid search fusion
version: "1.0"

class: TriBridFusion

methods:
  - name: search
    async: true
    params:
      - repo_id: str
      - query: str
      - config: FusionConfig
    returns: list[ChunkMatch]
    description: Fused tri-brid search

  - name: rrf_fusion
    params:
      - results: list[list[ChunkMatch]]
      - k: int
    returns: list[ChunkMatch]
    description: Reciprocal Rank Fusion

  - name: weighted_fusion
    params:
      - results: list[list[ChunkMatch]]
      - weights: list[float]
    returns: list[ChunkMatch]
    description: Weighted score fusion

config:
  FusionConfig:
    method: Literal["rrf", "weighted"]
    vector_weight: float
    sparse_weight: float
    graph_weight: float
    rrf_k: int
